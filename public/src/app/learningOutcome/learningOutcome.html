<section class="content">
  <section class="col-lg-12 connectedSortable">
    <toaster-container></toaster-container>
    <div class="box box-primary">
      <div class="box-header with-border">
        <h3 class="box-title">Quản lý chuẩn đầu ra</h3>
      </div>
      <form class="form-horizontal">
        <div class="box-body">
          <div class="form-group">
            <label class="col-sm-3 control-label">Chương trình đào tạo <span class="text-red">*</span></label>
            <div class="col-sm-4">
              <ui-select ng-model="vm.program" theme="bootstrap">
                <ui-select-match placeholder="Chọn chương trình đào tạo...">{{$select.selected}}</ui-select-match>
                <ui-select-choices repeat="item in vm.programs | filter: $select.search">
                  <div ng-bind-html="item | highlight: $select.search"></div>
                </ui-select-choices>
              </ui-select>
            </div>
          </div>
          <!-- /.form-group -->
          <div class="form-group">
            <label class="col-sm-3 control-label" for="fileLO">Tập tin <span class="text-red">*</span></label>
            <div class="col-sm-4">
              <input type="button" class="btn btn-default" value="Chọn tệp" ng-click="chooseFile()">
              <button type="button" class="btn btn-primary">Xem trước</button>
              <input type="file" class="btn" id="fileLO" name="upload[]" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                style="display: none;">
              <p class="help-block">Tải lên tập tin dưới dạng *.xls, *xlsx</p>
            </div>
          </div>
          <!-- /.form-group -->
        </div>
        <div class="box-footer">
          <button type="submit" class="btn btn-primary pull-right">Nhập</button>
        </div>
      </form>
    </div>
  </section>

  <section class="col-lg-7 connectedSortable">
    <div class="box box-primary">
      <div class="box-header with-border">
        <h3 class="box-title">Danh sách chuẩn đầu ra</h3>
        <button type="button" class="btn btn-warning pull-right" id="btnEdit">Sửa</button>
      </div>
      <div class="box-body">
        <div ui-tree data-drag-enabled="vm.dragEnabled" data-max-depth="4">
          <ol ui-tree-nodes ng-model="vm.treeData" id="tree-root">
            <li ng-repeat="node in vm.treeData" ui-tree-node ng-include="'nodes_renderer.html'"></li>
          </ol>
        </div>
      </div>
    </div>
  </section>

  <section class="col-lg-5 connectedSortable">
    <div class="box box-primary">
      <div class="box-header with-border">
        <h3 class="box-title">Thêm chuẩn đầu ra</h3>
      </div>
      <div class="box-body">
        <form class="form-horizontal" novalidate name="newNodeForm" role="form">
          <div class="form-group">
            <label for="addNode" class="col-sm-3 control-label">Chuẩn mới</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" id="addNode" ng-model="vm.newNode" name="addNode" placeholder="Chuẩn mới..."
                required>
            </div>
          </div>
        </form>
      </div>
      <div class="box-footer">
        <button type="button" ng-disabled="newNodeForm.$invalid" ng-click="vm.addSubNode()" class="btn btn-primary pull-right">Thêm chuẩn đầu ra</button>
      </div>
    </div>
  </section>
</section>

<script type="text/ng-template" id="nodes_renderer.html">
  <div ui-tree-handle>
    <a class="btn btn-primary btn-xs btn-collapse" ng-if="node.nodes && node.nodes.length > 0" data-nodrag ng-click="vm.toggle(this)">
      <span class="fa fa-angle-right" ng-class="{ 'fa-angle-right': collapsed, 'fa-angle-down': !collapsed }"></span>
    </a>
    {{node.title}}
    <a class="pull-right btn btn-danger btn-xs" data-nodrag ng-click="vm.remove(this)"><span class="fa fa-remove"></span></a>
    <a class="pull-right btn btn-primary btn-xs" data-nodrag ng-click="vm.addSubNode(this)" style="margin-right: 8px;"><span class="fa fa-plus"></span></a>
  </div>
  <ol ui-tree-nodes="" ng-model="node.nodes" ng-if="node.nodes.length > 0" ng-class="{ 'hidden' : collapsed}">
    <li ng-repeat="node in node.nodes" ui-tree-node data-nodrag ng-include="'nodes_renderer.html'"></li>
  </ol>
</script>